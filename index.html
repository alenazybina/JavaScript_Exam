<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam: JavaScript Adventure Game</title>
</head>
<body>
    <script>

        let playerName = "";
        let player = {
            health: 100,
            inventory: [],
            location: "Town",
            damage: 20,
        };
        
        const game = {
            locations: ["Forest", "Cave", "Town"],
            enemies: {
                witch: { 
                    name: "Witch Margaret", 
                    damage: 20,
                    health: 60 },
                ghost: {
                    name: "Ghost Casper",
                    damage: 15,
                    health: 40 },
                demon: {
                    name: "Demon Balthazar",
                    damage: 30,
                    health: 80 },

            },
        };

        const startGame = () => {
            alert(" 🙋‍♂️Welcome to the JavaScript Adventure Game!\nIn this game, you play as a brave adventurer exploring various locations such as the Forest, Cave, and Town.\nYour main goal is to defeat dangerous enemies such as ghost, witch and demon. You can choose to fight or flee during encounters. Collect potions and cookies to restore health, if your health will be 0, you lose the game.\nThe adventure continues until you defeat the Demon Balthazar in the Cave.\nGood luck!")
            playerName = prompt("What is your name?");
            alert("Hello 👋🏻, " + playerName + "! Your adventure starts in the " + player.location + ".");
            gameMenu();
        };

        const gameMenu = () => {
            if (player.health <= 0) {
                alert("You have died! Game over.")
                return;
            }
            let choice = prompt("Choose an action:\n1. Explore 🗺️ \n2. Use item 📦 \n3. Check status 📝 \n4. Exit ↩ \n(Enter the number of your choice)");

            switch (choice) {
                case "1":
                    explore();
                    break;
                case "2":
                    useItem();
                    break;
                case "3":
                    checkStatus();
                    break;
                case "4":
                    alert("Game over. Goodbye!")
                    return;
                default:
                    alert("⛔Invalid choice⛔. Try again.")
                    gameMenu();
            }


        };

        const explore = () => {
            let location = prompt("Where do you want to go?\nOptions:\n" + game.locations.join("\n") + "\n(Enter a word of your choice)");
            if (game.locations.includes(location)) {
                player.location = location;
                aleert("You are now in the " + location + ".")
                randomEvent();
            } else {
                alert("⛔ Invalid location ⛔. Try again.");
                explore();
            }
        };

        const randomEvent = () => {
            let event = Math.random();
            if (event < 0.5) {
                encounterEnemy();
            } else if (event < 0.8) {
                findItem();
            } else {
                alert("There is nothing to do here.. no enemies, no items..");
                gameMenu();
            }
        };

        const encounterEnemy = () => {
            let enemies = Object.values(game.enemies);
            let enemy = enemies[Math.floor(Math.random() * enemies.length)];
            alert("A scary " + enemy.name + "appears!");

            let action = prompt("Do you want to: \n1. Fight ⚔️ \n2. Flee 🏃 \n(Enter the number of your choice)");

            switch (action) {
                case "1": 
                    fight(enemy);
                    break;
                case "2":
                    alert("You successfully escaped from the enemy. 😎👌");
                    gameMenu();
                    break;
                default:
                    alert("⛔ Invalid action! ⛔ The enemy attacks you. You lost some health. 🤕");
                    player.health -= enemy.damage / 2;
                    gameMenu();
            }

        };

        




    
        startGame();
    </script>
</body>
</html>
